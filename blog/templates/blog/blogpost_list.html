{% extends 'blog/base.html' %}

{% block title %}Список статей блога{% endblock %}

{% block content %}
<h1>Статьи блога</h1>
<a href="{% url 'blog:blog_create' %}">Создать новую статью</a>

{% for post in blogposts %}
    <div class="blog-post">
        <h2><a href="{% url 'blog:blog_detail' post.pk %}">{{ post.title }}</a></h2>
        {% if post.preview %}
            <img src="{{ post.preview.url }}" alt="{{ post.title }}" width="200">
        {% endif %}
        <p>{{ post.content|truncatewords:30 }}</p>
        <p>Дата создания: {{ post.created_at|date:"d.m.Y H:i" }}</p>
        <p>Просмотров: {{ post.views_count }}</p>
        <a href="{% url 'blog:blog_update' post.pk %}">Редактировать</a>
        <a href="{% url 'blog:blog_delete' post.pk %}">Удалить</a>
    </div>
    <hr>
{% empty %}
    <p>Пока нет статей.</p>
{% endfor %}
{% endblock %}
